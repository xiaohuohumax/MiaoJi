import{_ as y,B as w}from"./CLink.vue_vue_type_script_setup_true_lang-CBIeQepy.js";import{C as b}from"./CSubTitle-pffntytk.js";import{aP as v,aQ as T,e as q,at as x,d as B,aw as P,w as R,ag as r,am as l,al as e,ak as t,ar as p,as as m,aq as a,ah as C,ap as $,ay as F,O as L,n as S}from"./index-hgVmP53t.js";import{a as V}from"../app.config.DHJUAgkF.js";import{h as A}from"./label-CponzLFM.js";import{C as D}from"./CMarkdown-DOdpslbb.js";import{_ as I}from"./CLoadPages.vue_vue_type_script_setup_true_lang-C0JCJMbj.js";import{_ as E}from"./CReactions.vue_vue_type_script_setup_true_lang-BGncmMuX.js";import{N as H}from"./Thing-DHf-WszG.js";import{N as _}from"./Space-CIlk5P2J.js";import{N as M}from"./_plugin-vue_export-helper-CERT5aKp.js";import{N as O}from"./Image-BSxvxIvP.js";import{N as Q}from"./Time-Bnd_IQWd.js";const j=new v(T),z={key:0,class:"text-center"},ne=q({__name:"CComment",props:{issue:{}},setup(N){const n=N,{t:c}=x(),h=B(()=>n.issue&&A(n.issue.labels,V.funcLabels.hiddenComment)),d=P("loadPagesRef");async function k(i,f){const u=await j.page({page:i,per_page:f,issue_number:n.issue.number});return{datas:u,hasNext:u.length===f}}return R(()=>n.issue,()=>{!n.issue&&!h.value||S(()=>{d.value.init(),d.value.queryPages(0)})},{immediate:!0}),(i,f)=>(r(),l(a(M),{bordered:!1},{default:e(()=>[t(a(_),{vertical:!0},{default:e(()=>[t(b,null,{default:e(()=>[p(m(a(c)("component.comment.title")),1)]),_:1}),h.value?(r(),C("div",z,m(a(c)("component.comment.hiddenComment")),1)):(r(),l(I,{key:1,ref_key:"loadPagesRef",ref:d,"query-pages-func":k,"auto-query":!1,state:"loading"},{default:e(({datas:u})=>[t(a(_),{vertical:!0},{default:e(()=>[i.issue?(r(),l(y,{key:0,href:`${i.issue.html_url}#new_comment_field`,target:"_blank"},{default:e(()=>[t(a(w),{secondary:"",class:"w-full",type:"info"},{default:e(()=>[p(m(a(c)("component.comment.toComment")),1)]),_:1})]),_:1},8,["href"])):$("",!0),(r(!0),C(L,null,F(u,s=>(r(),l(a(H),{key:s.id},{avatar:e(()=>{var o;return[t(a(O),{src:(o=s.user)==null?void 0:o.avatar_url,class:"w-16 h-16 rounded-md"},null,8,["src"])]}),header:e(()=>{var o;return[t(y,{href:(o=s.user)==null?void 0:o.html_url,target:"_blank"},{default:e(()=>{var g;return[p(m((g=s.user)==null?void 0:g.login),1)]}),_:2},1032,["href"])]}),description:e(()=>[t(a(_),{align:"center"},{default:e(()=>[t(a(Q),{time:new Date(s.created_at)},null,8,["time"]),t(E,{reaction:s.reactions,"issue-url":s.issue_url},null,8,["reaction","issue-url"])]),_:2},1024),t(D,{id:s.id,content:s.body},null,8,["id","content"])]),_:2},1024))),128))]),_:2},1024)]),_:1},512))]),_:1})]),_:1}))}});export{ne as _};
