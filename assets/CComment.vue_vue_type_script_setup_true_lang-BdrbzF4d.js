import{_ as g,B as w}from"./CLink.vue_vue_type_script_setup_true_lang--A8F9w0-.js";import{_ as b}from"./CSubTitle.vue_vue_type_script_setup_true_lang-CYirVgLU.js";import{aP as v,aQ as q,e as x,at as B,d as P,aw as T,w as $,ag as r,am as l,al as e,ak as t,aq as a,ah as y,as as d,ar as N,ap as R,ay as F,O as L,n as V}from"./index-lt-l7Tnr.js";import{a as A}from"../app.config.DI_w5fK8.js";import{h as D}from"./label-B03mzOYN.js";import{C as I}from"./CMarkdown-UrxvdZJa.js";import{_ as S}from"./CLoadPages.vue_vue_type_script_setup_true_lang-DSy5jWdm.js";import{_ as E}from"./CReactions.vue_vue_type_script_setup_true_lang-hgl5bk_g.js";import{N as H}from"./Thing-paU6hgLe.js";import{N as _}from"./Space-DuAUTwAB.js";import{N as M}from"./Card-CMrKoQ_M.js";import{N as O}from"./Image-D9lo5Md_.js";import{N as Q}from"./Time-C6cbDyi9.js";const j=new v(q),z={key:0,class:"text-center"},ne=x({__name:"CComment",props:{issue:{}},setup(k){const n=k,{t:m}=B(),p=P(()=>n.issue&&D(n.issue.labels,A.funcLabels.hiddenComment)),c=T("loadPagesRef");async function C(i,f){const u=await j.page({page:i,per_page:f,issue_number:n.issue.number});return{datas:u,hasNext:u.length===f}}return $(()=>n.issue,()=>{!n.issue&&!p.value||V(()=>{c.value.init(),c.value.queryPages(0)})},{immediate:!0}),(i,f)=>(r(),l(a(M),{bordered:!1},{default:e(()=>[t(a(_),{vertical:!0},{default:e(()=>[t(b,{title:a(m)("component.comment.title")},null,8,["title"]),p.value?(r(),y("div",z,d(a(m)("component.comment.hiddenComment")),1)):(r(),l(S,{key:1,ref_key:"loadPagesRef",ref:c,"query-pages-func":C,"auto-query":!1,state:"loading"},{default:e(({datas:u})=>[t(a(_),{vertical:!0},{default:e(()=>[i.issue?(r(),l(g,{key:0,href:`${i.issue.html_url}#new_comment_field`,target:"_blank"},{default:e(()=>[t(a(w),{secondary:"",class:"w-full",type:"info"},{default:e(()=>[N(d(a(m)("component.comment.toComment")),1)]),_:1})]),_:1},8,["href"])):R("",!0),(r(!0),y(L,null,F(u,s=>(r(),l(a(H),{key:s.id},{avatar:e(()=>{var o;return[t(a(O),{src:(o=s.user)==null?void 0:o.avatar_url,class:"w-16 h-16 rounded-md"},null,8,["src"])]}),header:e(()=>{var o;return[t(g,{href:(o=s.user)==null?void 0:o.html_url,target:"_blank"},{default:e(()=>{var h;return[N(d((h=s.user)==null?void 0:h.login),1)]}),_:2},1032,["href"])]}),description:e(()=>[t(a(_),{align:"center"},{default:e(()=>[t(a(Q),{time:new Date(s.created_at)},null,8,["time"]),t(E,{reaction:s.reactions,"issue-url":s.issue_url},null,8,["reaction","issue-url"])]),_:2},1024),t(I,{id:s.id,content:s.body},null,8,["id","content"])]),_:2},1024))),128))]),_:2},1024)]),_:1},512))]),_:1})]),_:1}))}});export{ne as _};
