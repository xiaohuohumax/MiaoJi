import{_ as m,B}from"./CLink.vue_vue_type_script_setup_true_lang-DD58yVlP.js";import{C as I}from"./CSubTitle-BadqKeKe.js";import{e as v,d as g,bC as x,ai as i,ap as p,ao as e,an as a,at as s,as as y,au as d,av as _,aw as V,aj as j,aB as z,O as T,ak as F,aC as N}from"./index-D0bB0mJU.js";import{a as f}from"../app.config.DWCuxb8o.js";import{h as C}from"./label-CLkH5TLJ.js";import{I as S}from"./hashtag-CmbUfPhw.js";import{e as L,N as $}from"./_plugin-vue_export-helper-Bn8exm5W.js";import{N as q}from"./Thing-D4UpMMfG.js";import{N as A}from"./Image-DYtfZ6cM.js";import{_ as D}from"./CLoadPages.vue_vue_type_script_setup_true_lang-ChsiIwN8.js";import{N as G,a as H}from"./Grid-CwzIKcHT.js";import{N as U}from"./Space-DUG0ZluM.js";import"./Tooltip-Qn_w74GV.js";import"./Empty-B76LzXT7.js";const E=v({__name:"CLinkCard",props:{issue:{}},setup(k){const r=k,u=g(()=>{var l,o;const t={title:((l=r.issue.user)==null?void 0:l.login)||"Unknown",href:((o=r.issue.user)==null?void 0:o.html_url)||"#"};if(!r.issue.body)return t;const n=x.parseLinks(r.issue.body);return n.length===0?t:{title:n[0].content,href:n[0].href}}),h=g(()=>C(r.issue.labels,f.funcLabels.pin));return(t,n)=>(i(),p(m,{href:u.value.href,target:"_blank"},{default:e(()=>[a(s(L),{size:"small",class:"relative hover:scale-[1.02] transition-transform duration-200 ease-in-out"},{default:e(()=>[h.value?(i(),p(s($),{key:0,class:"absolute top-0 right-0 z-30 font-bold dark:text-green-300 text-orange-500",size:24},{default:e(()=>[a(s(S))]),_:1})):y("",!0),a(s(q),null,{avatar:e(()=>{var l;return[a(s(A),{src:(l=t.issue.user)==null?void 0:l.avatar_url,class:"w-16 h-16 rounded-md"},null,8,["src"])]}),header:e(()=>[a(m,{href:u.value.href,target:"_blank"},{default:e(()=>[d(_(u.value.title),1)]),_:1},8,["href"])]),description:e(()=>[t.issue.user?(i(),p(m,{key:0,href:t.issue.user.html_url,target:"_blank"},{default:e(()=>[d(_(t.issue.user.login),1)]),_:1},8,["href"])):y("",!0)]),_:1})]),_:1})]),_:1},8,["href"]))}}),te=v({__name:"VLink",setup(k){const{t:r}=V();async function u(t,n){const l=[f.funcLabels.link],o=[];if(t===1){const c=l.concat(f.funcLabels.pin),w=await N.all({labels:c.join(",")});o.push(...w)}const b=await N.page({page:t,per_page:n,labels:l.join(",")});for(const c of b)C(c.labels,f.funcLabels.pin)||o.push(c);return{datas:o,hasNext:b.length===n}}const h=g(()=>encodeURI([f.repository,"/issues/new?title=",r("page.link.applyTitle"),"&body=",r("page.link.applyContent")].join("")));return(t,n)=>(i(),p(s(U),{vertical:!0},{default:e(()=>[a(s(L),{size:"small"},{default:e(()=>[a(I,null,{default:e(()=>[d(_(s(r)("page.link.title")),1)]),_:1})]),_:1}),a(D,{"query-pages-func":u},{default:e(({datas:l})=>[a(s(G),{cols:"1 s:2 m:3 l:3 xl:4",responsive:"screen","x-gap":12,"y-gap":12},{default:e(()=>[(i(!0),j(T,null,z(l,o=>(i(),p(s(H),{key:o.number},{default:e(()=>[a(E,{issue:o},null,8,["issue"])]),_:2},1024))),128))]),_:2},1024),n[0]||(n[0]=F("div",{class:"mt-4"},null,-1))]),_:1}),a(m,{href:h.value,target:"_blank"},{default:e(()=>[a(s(B),{class:"w-full",secondary:"",type:"info"},{default:e(()=>[d(_(s(r)("page.link.toApply")),1)]),_:1})]),_:1},8,["href"])]),_:1}))}});export{te as default};
