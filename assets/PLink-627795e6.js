import{w as V,N as p,_ as $}from"./loading-aba46111.js";import{_ as F}from"./COver.vue_vue_type_script_setup_true_lang-ad340878.js";import{_ as G}from"./CSubTitle.vue_vue_type_script_setup_true_lang-dbae11c4.js";import{d as O,ah as j,a as _,a9 as i,a8 as t,af as e,am as w,an as C,aB as D,a6 as o,a4 as l,a7 as S,al as E,F as T,ac as z,ad as n,ag as g,ae as f}from"./index-bab370b4.js";import{a as B}from"../app.config.js";import{N as H,a as J}from"./Grid-4bce3c75.js";import{N as P,j as v}from"./Space-7508ea39.js";import"./VResizeObserver-454e0fde.js";const K=["href"],M=["src","alt"],Q={size:"small",class:"flex items-center text-xl hover:text-green-300"},R=["href"],U={size:"small",class:"flex items-center hover:text-green-300"},W=["href"],X={class:"text-center"},Y={key:1,class:"text-center"},Z=["href"],q=10,ue=O({__name:"PLink",setup(ee){let m=1;const{t:r}=j(),u=_([]),d=V({state:"loading",fail:()=>r("component.cLoading.fail",{name:r("page.link.subtitle")})}),x=_(!1);async function b(c){d.value="loading";const[s,a]=await w(C.qIssuePage({labels:B.label.linkLabel,state:"all",page:c.toString(),per_page:q.toString()}));if(s){d.value="fail";return}(a.data.length==0||a.data.length<q)&&(x.value=!0);const I=a.data.map(N=>{const L=D(N.body);return{...N,anchor:L.length>0?L[0]:null}});u.value.push(...I),d.value="success"}b(m);function y(){const c=u.value.length,s=m+1;b(s).then(()=>{c!=u.value.length&&(m+=s)})}const k=_(null),h=_("loading");async function A(){const[c,s]=await w(C.qIssuePage({labels:B.label.applyLinkLabel,state:"all",page:"1",per_page:"1"}));if(c||s.data.length==0){h.value="fail";return}k.value=s.data[0],h.value="success"}return A(),(c,s)=>(o(),i(e(v),{vertical:""},{default:t(()=>[l(e(G),{context:e(r)("page.link.subtitle")},null,8,["context"]),u.value.length>0?(o(),i(e(H),{key:0,cols:"1 s:2 m:3 l:4 xl:5 2xl:6",responsive:"screen","x-gap":12,"y-gap":12},{default:t(()=>[(o(!0),S(T,null,E(u.value,a=>(o(),i(e(J),{key:a.number},{default:t(()=>[l(e(P),{size:"small",bordered:!1},{default:t(()=>[l(e(v),{class:"h-full"},{default:t(()=>[n("a",{class:"font-bold flex-shrink-0 mt-1",target:"_blank",href:a.user.html_url},[n("img",{class:"w-16 rounded-md mx-auto hover:scale-105 duration-100",src:a.user.avatar_url,alt:a.user.login},null,8,M)],8,K),l(e(v),{size:"small",vertical:"",class:"flex-grow"},{default:t(()=>[n("div",Q,[n("a",{href:a.anchor?a.anchor.href:a.user.html_url,target:"_blank"},f(a.anchor?a.anchor.content:a.title),9,R)]),n("div",U,[n("a",{href:a.user.html_url,target:"_blank"},f(a.user.login),9,W)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):z("",!0),l(e($),{state:e(d)},{fail:t(()=>[n("div",X,[l(e(p),{onClick:y},{default:t(()=>[g(f(e(r)("comment.button.retry")),1)]),_:1})])]),default:t(()=>[x.value?(o(),i(e(F),{key:0,context:e(r)("component.cOver.context")},null,8,["context"])):(o(),S("div",Y,[l(e(p),{onClick:y},{default:t(()=>[g(f(e(r)("comment.button.more")),1)]),_:1})]))]),_:1},8,["state"]),h.value=="success"?(o(),i(e(P),{key:1,size:"small",bordered:!1},{default:t(()=>[n("a",{href:k.value.html_url,target:"_blank"},[l(e(p),{class:"w-full",type:"info"},{default:t(()=>[g(f(e(r)("page.link.gotoApply")),1)]),_:1})],8,Z)]),_:1})):z("",!0)]),_:1}))}});export{ue as default};
