import{_ as C,B as b}from"./CLink.vue_vue_type_script_setup_true_lang-DD58yVlP.js";import{_ as v}from"./CRelativeTime.vue_vue_type_script_setup_true_lang-lT9YbSEe.js";import{C as w}from"./CSubTitle-BadqKeKe.js";import{b$ as B,c0 as $,e as x,aw as T,d as q,az as P,w as R,ai as r,ap as l,ao as e,an as a,au as _,av as m,at as t,aj as y,as as F,aB as L,O as S,n as V}from"./index-D0bB0mJU.js";import{a as z}from"../app.config.DWCuxb8o.js";import{h as A}from"./label-CLkH5TLJ.js";import{C as I}from"./CMarkdown-Anol8zB4.js";import{_ as j}from"./CLoadPages.vue_vue_type_script_setup_true_lang-ChsiIwN8.js";import{_ as D}from"./CReactions.vue_vue_type_script_setup_true_lang-CVZrDMOx.js";import{N as E}from"./Thing-D4UpMMfG.js";import{N as p}from"./Space-DUG0ZluM.js";import{e as H}from"./_plugin-vue_export-helper-Bn8exm5W.js";import{N as M}from"./Image-DYtfZ6cM.js";const O=new B($),G={key:0,class:"text-center"},ne=x({__name:"CComment",props:{issue:{}},setup(k){const n=k,{t:c}=T(),h=q(()=>n.issue&&A(n.issue.labels,z.funcLabels.hiddenComment)),d=P("loadPagesRef");async function N(u,f){const i=await O.page({page:u,per_page:f,issue_number:n.issue.number});return{datas:i,hasNext:i.length===f}}return R(()=>n.issue,()=>{!n.issue&&!h.value||V(()=>{d.value.init(),d.value.queryPages(0)})},{immediate:!0}),(u,f)=>(r(),l(t(H),{size:"small"},{default:e(()=>[a(t(p),{vertical:!0},{default:e(()=>[a(w,null,{default:e(()=>[_(m(t(c)("component.comment.title")),1)]),_:1}),h.value?(r(),y("div",G,m(t(c)("component.comment.hiddenComment")),1)):(r(),l(j,{key:1,ref_key:"loadPagesRef",ref:d,"query-pages-func":N,"auto-query":!1,state:"loading"},{default:e(({datas:i})=>[a(t(p),{vertical:!0},{default:e(()=>[u.issue?(r(),l(C,{key:0,href:`${u.issue.html_url}#new_comment_field`,target:"_blank"},{default:e(()=>[a(t(b),{secondary:"",class:"w-full",type:"info"},{default:e(()=>[_(m(t(c)("component.comment.toComment")),1)]),_:1})]),_:1},8,["href"])):F("",!0),(r(!0),y(S,null,L(i,s=>(r(),l(t(E),{key:s.id},{avatar:e(()=>{var o;return[a(t(M),{src:(o=s.user)==null?void 0:o.avatar_url,class:"w-16 h-16 rounded-md"},null,8,["src"])]}),header:e(()=>{var o;return[a(C,{href:(o=s.user)==null?void 0:o.html_url,target:"_blank"},{default:e(()=>{var g;return[_(m((g=s.user)==null?void 0:g.login),1)]}),_:2},1032,["href"])]}),description:e(()=>[a(t(p),{align:"center"},{default:e(()=>[a(v,{"updated-at":s.created_at},null,8,["updated-at"]),a(D,{reaction:s.reactions,"issue-url":s.issue_url},null,8,["reaction","issue-url"])]),_:2},1024),a(I,{id:s.id,content:s.body},null,8,["id","content"])]),_:2},1024))),128))]),_:2},1024)]),_:1},512))]),_:1})]),_:1}))}});export{ne as _};
