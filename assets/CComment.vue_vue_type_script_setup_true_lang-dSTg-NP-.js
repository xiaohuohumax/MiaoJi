import{_ as C,B as b}from"./CLink.vue_vue_type_script_setup_true_lang-CNdXO93o.js";import{_ as v}from"./CRelativeTime.vue_vue_type_script_setup_true_lang-CzfZbqOX.js";import{C as w}from"./CSubTitle-CmgzOeZW.js";import{aR as x,aS as q,e as B,au as R,d as T,ax as $,w as P,ah as r,an as l,am as e,al as a,as as _,at as m,ar as t,ai as y,aq as S,az as F,O as L,n as V}from"./index-CxY8spwR.js";import{a as z}from"../app.config.D_pCpokF.js";import{h as A}from"./label-C4fL_xG1.js";import{C as I}from"./CMarkdown-5E5ZYdfx.js";import{_ as D}from"./CLoadPages.vue_vue_type_script_setup_true_lang-CvwEzbuG.js";import{_ as E}from"./CReactions.vue_vue_type_script_setup_true_lang-DPnrl9Yh.js";import{N as H}from"./Thing-0_wEx6ku.js";import{N as p}from"./Space-mIpbSOwT.js";import{e as M}from"./_plugin-vue_export-helper-nDMbTP-M.js";import{N as O}from"./Image-DkgaKoPw.js";const j=new x(q),G={key:0,class:"text-center"},ne=B({__name:"CComment",props:{issue:{}},setup(k){const n=k,{t:d}=R(),h=T(()=>n.issue&&A(n.issue.labels,z.funcLabels.hiddenComment)),c=$("loadPagesRef");async function N(u,f){const i=await j.page({page:u,per_page:f,issue_number:n.issue.number});return{datas:i,hasNext:i.length===f}}return P(()=>n.issue,()=>{!n.issue&&!h.value||V(()=>{c.value.init(),c.value.queryPages(0)})},{immediate:!0}),(u,f)=>(r(),l(t(M),{size:"small"},{default:e(()=>[a(t(p),{vertical:!0},{default:e(()=>[a(w,null,{default:e(()=>[_(m(t(d)("component.comment.title")),1)]),_:1}),h.value?(r(),y("div",G,m(t(d)("component.comment.hiddenComment")),1)):(r(),l(D,{key:1,ref_key:"loadPagesRef",ref:c,"query-pages-func":N,"auto-query":!1,state:"loading"},{default:e(({datas:i})=>[a(t(p),{vertical:!0},{default:e(()=>[u.issue?(r(),l(C,{key:0,href:`${u.issue.html_url}#new_comment_field`,target:"_blank"},{default:e(()=>[a(t(b),{secondary:"",class:"w-full",type:"info"},{default:e(()=>[_(m(t(d)("component.comment.toComment")),1)]),_:1})]),_:1},8,["href"])):S("",!0),(r(!0),y(L,null,F(i,s=>(r(),l(t(H),{key:s.id},{avatar:e(()=>{var o;return[a(t(O),{src:(o=s.user)==null?void 0:o.avatar_url,class:"w-16 h-16 rounded-md"},null,8,["src"])]}),header:e(()=>{var o;return[a(C,{href:(o=s.user)==null?void 0:o.html_url,target:"_blank"},{default:e(()=>{var g;return[_(m((g=s.user)==null?void 0:g.login),1)]}),_:2},1032,["href"])]}),description:e(()=>[a(t(p),{align:"center"},{default:e(()=>[a(v,{"updated-at":s.created_at},null,8,["updated-at"]),a(E,{reaction:s.reactions,"issue-url":s.issue_url},null,8,["reaction","issue-url"])]),_:2},1024),a(I,{id:s.id,content:s.body},null,8,["id","content"])]),_:2},1024))),128))]),_:2},1024)]),_:1},512))]),_:1})]),_:1}))}});export{ne as _};
