import{C as L}from"./CSubTitle-BadqKeKe.js";import{e as h,d as g,bC as w,am as z,ai as u,ap as p,ao as s,an as e,at as a,bn as x,as as A,ak as f,av as y,aD as B,aw as V,au as $,aj as j,aB as D,O as S,aC as v}from"./index-D0bB0mJU.js";import{a as c}from"../app.config.DWCuxb8o.js";import{h as k}from"./label-CLkH5TLJ.js";import{_ as F}from"./CAuthor.vue_vue_type_script_setup_true_lang-BFYREMNs.js";import{_ as R}from"./CRelativeTime.vue_vue_type_script_setup_true_lang-lT9YbSEe.js";import{I as q}from"./CLink.vue_vue_type_script_setup_true_lang-DD58yVlP.js";import{I as G}from"./hashtag-CmbUfPhw.js";import{_ as T}from"./CReactions.vue_vue_type_script_setup_true_lang-CVZrDMOx.js";import{e as C,N}from"./_plugin-vue_export-helper-Bn8exm5W.js";import{N as d}from"./Space-DUG0ZluM.js";import{N as E}from"./Image-DYtfZ6cM.js";import{_ as H}from"./CLoadPages.vue_vue_type_script_setup_true_lang-ChsiIwN8.js";import{N as O,a as P}from"./Grid-CwzIKcHT.js";import"./CPreIcon.vue_vue_type_script_setup_true_lang-0rK5ircS.js";import"./Empty-B76LzXT7.js";import"./Tooltip-Qn_w74GV.js";const J={class:"flex items-center justify-center w-full py-20"},K={class:"text-lg"},M=h({__name:"CAlbumCard",props:{issue:{}},setup(_){const l=_,o=g(()=>l.issue.body?w.parseImages(l.issue.body):[]),n=g(()=>k(l.issue.labels,c.funcLabels.pin));return(t,i)=>{const r=z("RouterLink");return u(),p(r,{to:{name:a(B).AlbumDetail,params:{id:t.issue.number}}},{default:s(()=>[e(a(C),{size:"small",class:"relative hover:scale-[1.02] transition-transform duration-200 ease-in-out"},x({default:s(()=>[n.value?(u(),p(a(N),{key:0,class:"absolute top-0 right-0 z-30 font-bold dark:text-green-300 text-orange-500",size:24},{default:s(()=>[e(a(G))]),_:1})):A("",!0),e(a(d),{vertical:"",size:"small"},{default:s(()=>[f("div",K,y(t.issue.title),1),e(a(d),null,{default:s(()=>[e(F,{user:t.issue.user},null,8,["user"]),e(R,{"updated-at":t.issue.updated_at},null,8,["updated-at"])]),_:1}),e(T,{reaction:t.issue.reactions,"issue-url":t.issue.html_url},null,8,["reaction","issue-url"])]),_:1})]),_:2},[o.value.length>0?{name:"cover",fn:s(()=>[e(a(E),{class:"w-full",src:o.value[0].src,alt:o.value[0].alt,"preview-disabled":!0,lazy:""},{placeholder:s(()=>[f("div",J,[e(a(N),{size:"30"},{default:s(()=>[e(a(q),{class:"animate-spin inline-block"})]),_:1})])]),_:1},8,["src","alt"])]),key:"0"}:void 0]),1024)]),_:1},8,["to"])}}}),ce=h({__name:"VAlbum",setup(_){const{t:l}=V();async function o(n,t){const i=[c.funcLabels.album],r=[];if(n===1){const m=i.concat(c.funcLabels.pin),I=await v.all({labels:m.join(",")});r.push(...I)}const b=await v.page({page:n,per_page:t,labels:i.join(",")});for(const m of b)k(m.labels,c.funcLabels.pin)||r.push(m);return{datas:r,hasNext:b.length===t}}return(n,t)=>(u(),p(a(d),{vertical:!0},{default:s(()=>[e(a(C),{size:"small"},{default:s(()=>[e(L,null,{default:s(()=>[$(y(a(l)("page.album.title")),1)]),_:1})]),_:1}),e(H,{"query-pages-func":o},{default:s(({datas:i})=>[e(a(O),{cols:"1 s:2 m:3 l:3 xl:4",responsive:"screen","x-gap":12,"y-gap":12},{default:s(()=>[(u(!0),j(S,null,D(i,r=>(u(),p(a(P),{key:r.number},{default:s(()=>[e(M,{issue:r},null,8,["issue"]),t[0]||(t[0]=f("div",{class:"mt-4"},null,-1))]),_:2},1024))),128))]),_:2},1024)]),_:1})]),_:1}))}});export{ce as default};
