import{d as y,ag as C,ah as A,ai as L,a as B,ax as D,a9 as _,a8 as s,ae as e,am as F,an as S,az as $,aA as v,a6 as p,a4 as t,ac as r,ad as u,af as g,a7 as T,ak as q,ay as z,F as I}from"./index-efee6842.js";import{w as P,_ as V}from"./loading-59b51ff0.js";import{C as j}from"./CMarkdown-6b7555ed.js";import{_ as E}from"./CLabel.vue_vue_type_script_setup_true_lang-a7ebb1a7.js";import{N as h,_ as H}from"./CReactions.vue_vue_type_script_setup_true_lang-78fd347e.js";import{a as M}from"../app.config.js";import{_ as R}from"./CComments.vue_vue_type_script_setup_true_lang-4c65a09b.js";import{N as b,j as c}from"./Space-6bdbf578.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./use-locale-73f1eb57.js";import"./COver.vue_vue_type_script_setup_true_lang-e5cb7dd1.js";const G={class:"text-2xl font-bold align-middle dark:text-green-300 text-orange-500"},J=["href"],le=y({__name:"PDocument",props:{id:{}},setup(x){const{t:n}=C(),k=A(),m=L(),N=x,a=B(null),i=P({state:"loading",fail:()=>n("component.cLoading.fail",{name:n("page.doc.subtitle")})});async function f(){var o;i.value="loading";const[l,d]=await F(S.qIssueById(N.id));if(l){if(((o=l==null?void 0:l.response)==null?void 0:o.status)==404){m.replace({name:"PNotFound"});return}i.value="fail";return}if(!$(d.data.labels,M.label.docLabel)){m.replace({name:"PNotFound"});return}a.value=d.data,i.value="success",v({after:a.value.title})}f(),D(()=>{a.value&&v({after:a.value.title})});function w(l){m.push({path:"/",query:{label:l.name}})}return(l,d)=>(p(),_(e(V),{state:e(i)},{fail:s(()=>[t(e(b),{size:"small",bordered:!1},{default:s(()=>[r("button",{class:"p-2 w-full font-bold",onClick:f},u(e(n)("comment.button.refresh")),1)]),_:1})]),default:s(()=>[t(e(c),{vertical:""},{default:s(()=>[t(e(b),{size:"small",bordered:!1},{default:s(()=>[t(e(c),{class:"text-sm relative",vertical:""},{default:s(()=>[r("p",G,u(a.value.title),1),t(e(c),null,{default:s(()=>[r("a",{target:"_blank",href:a.value.user.html_url,class:"hover:text-orange-500 dark:hover:text-green-300"},[r("span",null,u(a.value.user.login),1)],8,J),r("span",null,[g(u(e(n)("comment.span.createAt"))+": ",1),t(e(h),{time:new Date(a.value.created_at)},null,8,["time"])]),r("span",null,[g(u(e(n)("comment.span.updateAt"))+": ",1),t(e(h),{time:new Date(a.value.updated_at),type:"relative"},null,8,["time"])])]),_:1}),t(e(c),{align:"center"},{default:s(()=>[(p(!0),T(I,null,q(e(z)(a.value.labels),o=>(p(),_(E,{key:o.id,"hidden-des":!0,onClick:K=>w(o),label:o,class:"font-bold"},null,8,["onClick","label"]))),128)),t(H,{reactions:a.value.reactions},null,8,["reactions"])]),_:1}),t(e(j),{text:a.value.body,id:a.value.number,theme:e(k).theme.markdown},null,8,["text","id","theme"])]),_:1})]),_:1}),t(R,{issue:a.value,title:e(n)("page.doc.commentsTitle")},null,8,["issue","title"])]),_:1})]),_:1},8,["state"]))}});export{le as default};
