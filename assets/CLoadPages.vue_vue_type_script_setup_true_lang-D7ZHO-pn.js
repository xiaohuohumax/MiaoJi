import{ai as c,aj as y,ak as $,e as h,aV as M,aw as I,aW as V,r as g,ap as _,ao as r,l as n,as as x,at as e,aX as S,an as s,au as k,av as w}from"./index-8Nduy9rO.js";import{a as q}from"../app.config.DbvFL-si.js";import{I as E,B as N}from"./CLink.vue_vue_type_script_setup_true_lang-ZMawmrFq.js";import{N as C}from"./Empty-Bvz1bHPu.js";import{N as F}from"./Space-DmT7jGdB.js";import{N as P}from"./_plugin-vue_export-helper-NmBTaXtx.js";const Q={xmlns:"http://www.w3.org/2000/svg",width:"28",fill:"currentColor",viewBox:"-2 -2 24 24"};function b(m,l){return c(),y("svg",Q,l[0]||(l[0]=[$("path",{d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16m0 2C4.477 20 0 15.523 0 10S4.477 0 10 0s10 4.477 10 10-4.477 10-10 10M5 9h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2"},null,-1)]))}const j={render:b},z={class:"text-center p-2"},X=h({__name:"CLoadPages",props:M({perPage:{default:q.perPage},autoQuery:{type:Boolean,default:!0},state:{default:"init"},queryPagesFunc:{}},{datas:{default:()=>[]},datasModifiers:{}}),emits:["update:datas"],setup(m,{expose:l}){const u=m,{t:v}=I(),i=V(m,"datas"),f=g(1),a=g(u.state);async function d(t){if(a.value==="empty"||a.value==="over")return;a.value="loading",f.value+=t;const[o,p]=await S(u.queryPagesFunc(f.value,u.perPage));if(o){a.value="error";return}i.value.push(...p.datas),a.value=p.hasNext?"more":i.value.length===0?"empty":"over"}u.autoQuery&&d(0);function B(){a.value="init",f.value=1,i.value=[]}return l({init:B,queryPages:d}),(t,o)=>(c(),_(e(F),{vertical:!0},{default:r(()=>[n(t.$slots,"default",{datas:i.value}),a.value==="loading"?n(t.$slots,"loading",{key:0},()=>[$("div",z,[s(e(P),{size:30},{default:r(()=>[s(e(E),{class:"animate-spin inline-block"})]),_:1})])]):a.value==="error"?(c(),y("div",{key:1,onClick:o[0]||(o[0]=p=>d(0))},[n(t.$slots,"error",{},()=>[s(e(N),{class:"w-full",secondary:"",type:"warning"},{default:r(()=>[k(w(e(v)("component.loadPages.retry")),1)]),_:1})])])):a.value==="more"?(c(),y("div",{key:2,onClick:o[1]||(o[1]=p=>d(1))},[n(t.$slots,"more",{},()=>[s(e(N),{class:"w-full",secondary:"",type:"info"},{default:r(()=>[k(w(e(v)("component.loadPages.more")),1)]),_:1})])])):a.value==="over"?n(t.$slots,"over",{key:3},()=>[s(e(C),{description:e(v)("component.loadPages.over")},{icon:r(()=>[s(e(P),null,{default:r(()=>[s(e(j))]),_:1})]),_:1},8,["description"])]):a.value==="empty"?n(t.$slots,"empty",{key:4},()=>[s(e(C),{class:"p-4"})]):x("",!0)]),_:3}))}});export{X as _};
