import{e as m,bp as v,aw as y,bq as k,r as N,ai as _,ap as g,ao as r,l as n,as as B,at as t,br as D,ak as w,an as u,au as C,av as b}from"./index-D0bB0mJU.js";import{I as q,B as I}from"./CLink.vue_vue_type_script_setup_true_lang-DD58yVlP.js";import{N as V}from"./Space-DUG0ZluM.js";import{N as h}from"./_plugin-vue_export-helper-Bn8exm5W.js";const x={class:"text-center p-2"},Q=m({__name:"CLoadData",props:v({autoQuery:{type:Boolean,default:!0},queryDataFunc:{}},{data:{},dataModifiers:{}}),emits:["update:data"],setup(i,{expose:d}){const l=i,{t:p}=y(),s=k(i,"data"),a=N("init");async function o(){a.value="loading";const[e,c]=await D(l.queryDataFunc());if(e){a.value="error";return}s.value=c,a.value="success"}l.autoQuery&&o();function f(){a.value="init",s.value=void 0}return d({init:f,queryData:o}),(e,c)=>(_(),g(t(V),{vertical:!0},{default:r(()=>[a.value==="loading"?n(e.$slots,"loading",{key:0},()=>[w("div",x,[u(t(h),{size:30},{default:r(()=>[u(t(q),{class:"animate-spin inline-block"})]),_:1})])]):a.value==="error"?n(e.$slots,"error",{key:1},()=>[u(t(I),{class:"w-full",secondary:"",type:"warning",onClick:o},{default:r(()=>[C(b(t(p)("component.loadData.retry")),1)]),_:1})]):a.value==="success"?n(e.$slots,"success",{key:2,data:s.value}):B("",!0)]),_:3}))}});export{Q as _};
