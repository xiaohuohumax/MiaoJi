import{e as m,aR as y,at as v,aS as k,r as N,ag as g,am as _,al as r,l as n,ap as B,aq as t,aT as D,ai as C,ak as u,ar as q,as as w}from"./index-Bwq5MEXp.js";import{N as I,I as S,B as V}from"./CLink.vue_vue_type_script_setup_true_lang-D9lmZ61M.js";import{N as h}from"./Space-BVa_0GKn.js";const x={class:"text-center p-2"},Q=m({__name:"CLoadData",props:y({autoQuery:{type:Boolean,default:!0},queryDataFunc:{}},{data:{},dataModifiers:{}}),emits:["update:data"],setup(l,{expose:d}){const c=l,{t:p}=v(),s=k(l,"data"),a=N("init");async function o(){a.value="loading";const[e,i]=await D(c.queryDataFunc());if(e){a.value="error";return}s.value=i,a.value="success"}c.autoQuery&&o();function f(){a.value="init",s.value=void 0}return d({init:f,queryData:o}),(e,i)=>(g(),_(t(h),{vertical:!0},{default:r(()=>[a.value==="loading"?n(e.$slots,"loading",{key:0},()=>[C("div",x,[u(t(I),{size:30},{default:r(()=>[u(t(S),{class:"animate-spin inline-block"})]),_:1})])]):a.value==="error"?n(e.$slots,"error",{key:1},()=>[u(t(V),{class:"w-full",secondary:"",type:"warning",onClick:o},{default:r(()=>[q(w(t(p)("component.loadData.retry")),1)]),_:1})]):a.value==="success"?n(e.$slots,"success",{key:2,data:s.value}):B("",!0)]),_:3}))}});export{Q as _};
