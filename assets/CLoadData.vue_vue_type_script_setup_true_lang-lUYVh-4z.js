import{e as m,aV as v,aw as y,aW as k,r as N,ai as _,ap as g,ao as r,l as n,as as B,at as t,aX as D,ak as w,an as u,au as C,av as V}from"./index-8Nduy9rO.js";import{I,B as h}from"./CLink.vue_vue_type_script_setup_true_lang-ZMawmrFq.js";import{N as q}from"./Space-DmT7jGdB.js";import{N as x}from"./_plugin-vue_export-helper-NmBTaXtx.js";const M={class:"text-center p-2"},b=m({__name:"CLoadData",props:v({autoQuery:{type:Boolean,default:!0},queryDataFunc:{}},{data:{},dataModifiers:{}}),emits:["update:data"],setup(i,{expose:d}){const l=i,{t:p}=y(),s=k(i,"data"),a=N("init");async function o(){a.value="loading";const[e,c]=await D(l.queryDataFunc());if(e){a.value="error";return}s.value=c,a.value="success"}l.autoQuery&&o();function f(){a.value="init",s.value=void 0}return d({init:f,queryData:o}),(e,c)=>(_(),g(t(q),{vertical:!0},{default:r(()=>[a.value==="loading"?n(e.$slots,"loading",{key:0},()=>[w("div",M,[u(t(x),{size:30},{default:r(()=>[u(t(I),{class:"animate-spin inline-block"})]),_:1})])]):a.value==="error"?n(e.$slots,"error",{key:1},()=>[u(t(h),{class:"w-full",secondary:"",type:"warning",onClick:o},{default:r(()=>[C(V(t(p)("component.loadData.retry")),1)]),_:1})]):a.value==="success"?n(e.$slots,"success",{key:2,data:s.value}):B("",!0)]),_:3}))}});export{b as _};
