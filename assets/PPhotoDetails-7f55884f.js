import{d as C,ag as D,ai as I,a as L,ax as $,a9 as p,a8 as l,ae as a,am as A,an as B,az as F,aD as P,aA as v,a6 as i,a4 as t,ac as n,ad as u,af as g,a7 as h,ak as b,ay as T,F as N}from"./index-efee6842.js";import{w as q,_ as z}from"./loading-59b51ff0.js";import{_ as S}from"./CLabel.vue_vue_type_script_setup_true_lang-a7ebb1a7.js";import{N as y,_ as V}from"./CReactions.vue_vue_type_script_setup_true_lang-78fd347e.js";import{a as G}from"../app.config.js";import{_ as j}from"./CComments.vue_vue_type_script_setup_true_lang-4c65a09b.js";import{N as k,j as d}from"./Space-6bdbf578.js";import{N as E,a as R}from"./Grid-0ec06826.js";import{N as H}from"./Image-ddf258bf.js";import"./use-locale-73f1eb57.js";import"./COver.vue_vue_type_script_setup_true_lang-e5cb7dd1.js";import"./CMarkdown-6b7555ed.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./VResizeObserver-8dca25ba.js";import"./Popover-9f2d174e.js";const J={class:"text-2xl font-bold align-middle"},K=["href"],ia=C({__name:"PPhotoDetails",props:{id:{}},setup(x){const{t:o}=D(),f=I(),w=x,e=L(null),c=q({state:"loading",fail:()=>o("component.cLoading.fail",{name:o("page.photoDetails.subtitle")})});async function _(){var s;c.value="loading";const[r,m]=await A(B.qIssueById(w.id));if(r){if(((s=r==null?void 0:r.response)==null?void 0:s.status)==404){f.replace({name:"PNotFound"});return}c.value="fail";return}if(!F(m.data.labels,G.label.photoLabel)){f.replace({name:"PNotFound"});return}e.value={...m.data,images:P(m.data.body)},c.value="success",v({after:e.value.title})}return _(),$(()=>{e.value&&v({after:e.value.title})}),(r,m)=>(i(),p(a(z),{state:a(c)},{fail:l(()=>[t(a(k),{size:"small",bordered:!1},{default:l(()=>[n("button",{class:"p-2 w-full font-bold",onClick:_},u(a(o)("comment.button.retry")),1)]),_:1})]),default:l(()=>[t(a(d),{vertical:""},{default:l(()=>[t(a(k),{size:"small",bordered:!1},{default:l(()=>[t(a(d),{class:"text-sm relative",vertical:""},{default:l(()=>[n("p",J,u(e.value.title),1),t(a(d),null,{default:l(()=>[n("a",{target:"_blank",href:e.value.user.html_url},[n("span",null,u(e.value.user.login),1)],8,K),n("span",null,[g(u(a(o)("comment.span.createAt"))+": ",1),t(a(y),{time:new Date(e.value.created_at)},null,8,["time"])]),n("span",null,[g(u(a(o)("comment.span.updateAt"))+": ",1),t(a(y),{time:new Date(e.value.updated_at),type:"relative"},null,8,["time"])])]),_:1}),t(a(d),{align:"center"},{default:l(()=>[(i(!0),h(N,null,b(a(T)(e.value.labels),s=>(i(),p(S,{key:s.id,"hidden-des":!0,onClick:M=>r.$router.push({path:"/",query:{label:s.name}}),label:s,class:"font-bold"},null,8,["onClick","label"]))),128)),t(V,{reactions:e.value.reactions},null,8,["reactions"])]),_:1}),t(a(E),{cols:"1 s:2 m:3 l:4 xl:5 2xl:6",responsive:"screen","x-gap":8},{default:l(()=>[(i(!0),h(N,null,b(e.value.images,s=>(i(),p(a(R),{key:s.src},{default:l(()=>[t(a(H),{class:"rounded-md",src:s.src,alt:s.alt},null,8,["src","alt"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(j,{issue:e.value,title:a(o)("page.photoDetails.commentsTitle")},null,8,["issue","title"])]),_:1})]),_:1},8,["state"]))}});export{ia as default};
