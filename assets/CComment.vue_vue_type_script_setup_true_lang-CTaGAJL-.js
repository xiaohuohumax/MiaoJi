import{_ as C,B as v}from"./CLink.vue_vue_type_script_setup_true_lang-ZMawmrFq.js";import{_ as w}from"./CRelativeTime.vue_vue_type_script_setup_true_lang-CreIa-b_.js";import{C as b}from"./CSubTitle-DB9RCy18.js";import{aT as B,aU as T,e as x,aw as $,d as q,az as P,w as R,ai as r,ap as l,ao as e,an as a,au as _,av as m,at as t,aj as y,as as F,aB as L,O as S,n as V}from"./index-8Nduy9rO.js";import{a as z}from"../app.config.DbvFL-si.js";import{h as A}from"./label-FT08EvGY.js";import{C as I}from"./CMarkdown-duaaFRoc.js";import{_ as j}from"./CLoadPages.vue_vue_type_script_setup_true_lang-D7ZHO-pn.js";import{_ as D}from"./CReactions.vue_vue_type_script_setup_true_lang-xL5WY4lk.js";import{N as E}from"./Thing-D4eo5_FA.js";import{N as p}from"./Space-DmT7jGdB.js";import{e as H}from"./_plugin-vue_export-helper-NmBTaXtx.js";import{N as M}from"./Image-BVRwZqqM.js";const O=new B(T),U={key:0,class:"text-center"},ne=x({__name:"CComment",props:{issue:{}},setup(k){const n=k,{t:d}=$(),h=q(()=>n.issue&&A(n.issue.labels,z.funcLabels.hiddenComment)),c=P("loadPagesRef");async function N(u,f){const i=await O.page({page:u,per_page:f,issue_number:n.issue.number});return{datas:i,hasNext:i.length===f}}return R(()=>n.issue,()=>{!n.issue&&!h.value||V(()=>{c.value.init(),c.value.queryPages(0)})},{immediate:!0}),(u,f)=>(r(),l(t(H),{size:"small"},{default:e(()=>[a(t(p),{vertical:!0},{default:e(()=>[a(b,null,{default:e(()=>[_(m(t(d)("component.comment.title")),1)]),_:1}),h.value?(r(),y("div",U,m(t(d)("component.comment.hiddenComment")),1)):(r(),l(j,{key:1,ref_key:"loadPagesRef",ref:c,"query-pages-func":N,"auto-query":!1,state:"loading"},{default:e(({datas:i})=>[a(t(p),{vertical:!0},{default:e(()=>[u.issue?(r(),l(C,{key:0,href:`${u.issue.html_url}#new_comment_field`,target:"_blank"},{default:e(()=>[a(t(v),{secondary:"",class:"w-full",type:"info"},{default:e(()=>[_(m(t(d)("component.comment.toComment")),1)]),_:1})]),_:1},8,["href"])):F("",!0),(r(!0),y(S,null,L(i,s=>(r(),l(t(E),{key:s.id},{avatar:e(()=>{var o;return[a(t(M),{src:(o=s.user)==null?void 0:o.avatar_url,class:"w-16 h-16 rounded-md"},null,8,["src"])]}),header:e(()=>{var o;return[a(C,{href:(o=s.user)==null?void 0:o.html_url,target:"_blank"},{default:e(()=>{var g;return[_(m((g=s.user)==null?void 0:g.login),1)]}),_:2},1032,["href"])]}),description:e(()=>[a(t(p),{align:"center"},{default:e(()=>[a(w,{"updated-at":s.created_at},null,8,["updated-at"]),a(D,{reaction:s.reactions,"issue-url":s.issue_url},null,8,["reaction","issue-url"])]),_:2},1024),a(I,{id:s.id,content:s.body},null,8,["id","content"])]),_:2},1024))),128))]),_:2},1024)]),_:1},512))]),_:1})]),_:1}))}});export{ne as _};
