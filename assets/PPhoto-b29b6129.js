import{w as P,N,_ as S}from"./loading-a78a163c.js";import{_ as w}from"./COver.vue_vue_type_script_setup_true_lang-b563217d.js";import{_ as $}from"./CSubTitle.vue_vue_type_script_setup_true_lang-c8810d96.js";import{d as B,ap as I,a as b,ai as d,ah as a,an as e,aw as L,ax as V,aM as q,af as n,ad as s,ag as k,au as z,S as A,av as D,al as p,ao as g,am as f}from"./index-f8bff656.js";import{N as G,_ as O}from"./CReactions.vue_vue_type_script_setup_true_lang-57d879a7.js";import{a as T}from"../app.config.js";import{N as j,a as E}from"./Grid-57485010.js";import{h as y,N as F}from"./Space-6de73d0e.js";import"./use-locale-8e798743.js";import"./VResizeObserver-a6c79211.js";const M=["src","alt"],H={class:"text-lg mt-2 hover:text-orange-500 dark:hover:text-green-300"},J={class:"text-center"},K={key:1,class:"text-center"},C=10,oe=B({__name:"PPhoto",setup(Q){let _=1;const{t:o}=I(),r=b([]),m=P({state:"loading",fail:()=>o("component.cLoading.fail",{name:o("page.photo.subtitle")})}),v=b(!1);async function h(l){m.value="loading";const[i,t]=await L(V.qIssuePage({labels:T.label.photoLabel,state:"all",page:l.toString(),per_page:C.toString()}));if(i){m.value="fail";return}(t.data.length==0||t.data.length<C)&&(v.value=!0);const c=t.data.map(u=>({...u,images:q(u.body)}));r.value.push(...c),m.value="success"}h(_);function x(){const l=r.value.length,i=_+1;h(i).then(()=>{l!=r.value.length&&(_+=i)})}return(l,i)=>(n(),d(e(y),{vertical:""},{default:a(()=>[s(e($),{context:e(o)("page.photo.subtitle")},null,8,["context"]),r.value.length>0?(n(),d(e(j),{key:0,cols:"1 s:2 m:3 l:4 xl:5 2xl:6",responsive:"screen","x-gap":8,"y-gap":8},{default:a(()=>[(n(!0),k(A,null,z(r.value,t=>(n(),d(e(E),{class:"group cursor-pointer",key:t.number,onClick:c=>l.$router.push("/photo/"+t.number)},{default:a(()=>[s(e(F),{size:"small",bordered:!1},{default:a(()=>{var c,u;return[p("img",{class:"object-cover rounded-md",src:(c=t.images[0])==null?void 0:c.src,alt:(u=t.images[0])==null?void 0:u.alt},null,8,M),s(e(y),{vertical:""},{default:a(()=>[p("div",H,f(t.title),1),p("div",null,[g(f(e(o)("comment.span.createAt"))+": ",1),s(e(G),{time:new Date(t.updated_at),type:"relative"},null,8,["time"])]),s(O,{reactions:t.reactions},null,8,["reactions"])]),_:2},1024)]}),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):D("",!0),s(e(S),{state:e(m)},{fail:a(()=>[p("div",J,[s(e(N),{onClick:x},{default:a(()=>[g(f(e(o)("comment.button.retry")),1)]),_:1})])]),default:a(()=>[v.value?(n(),d(e(w),{key:0,context:e(o)("component.cOver.context")},null,8,["context"])):(n(),k("div",K,[s(e(N),{onClick:x},{default:a(()=>[g(f(e(o)("comment.button.more")),1)]),_:1})]))]),_:1},8,["state"])]),_:1}))}});export{oe as default};
